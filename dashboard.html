 <html>
    <head>
        <style>
            text {color: black;}
            table tr td {
                border: 1px solid black;
            }

            table {
                border-collapse: collapse;
                width: 50%;
            }

            td {
                text-align: center;
            }
        </style>
    
    
        <script src="https://d3js.org/d3.v5.min.js"></script>
    </head>

    <body>
        <h1>Parts Summary</h1>
            <div id="tablediv"></div>
            <table id="ptable">
                <tr>
                    <th>Part Number</th>
                    <th>Part Name</th>
                    <th>On-Hand</th>
                    <th>Total-Needed</th>
                    <th>Shortage</th>
                    <th>Date Placed</th>
                    <th>Lead Time</th>
                    <th>Date Expected</th>
                </tr>
            </table>
        <h1>Drawing Summary</h1>
            <svg id="PartSummary"></svg>
        
        <script>
            var svgel = d3.select("svg");
            var intdata, mybody, parsedCSV,outputData,onlynewdata

            function isNewPart(value){
                return value[0].includes('303');
            }

            function colortest(row){
                if(row[4] > 0){
                    return 'red';
                }
                else{
                    return 'white';
                }
                
            }

            d3.csv("Delivery.csv")
                .then(function(data){
                    intdata = data; 

                    outputData = data.map( Object.values ); //Turns the object into an array of arrays.
                    onlynewdata = outputData.filter(isNewPart); //This filters the output data to only include new parts

                    mybody = d3.select("table#ptable")
                                .selectAll("tr.data")
                                .data(outputData,function(d){
                                    console.log(d)
                                    return d;
                                })
                                .enter()
                                .append("tr")
                                .style("class","data")
                                .style('background-color',function(d){
                                    if(d[4] > 0){
                                        return '#ffcccb';
                                        }
                                        else{
                                             return 'white';
                                        }
                                })
                                .selectAll("td")
                                .data(function(d){
                                    console.log(d)
                                    return d;
                                })
                                .enter()
                                .append("td")
                                .text(d => d)        
                } 
            )
        </script>
    </body>

 </html>